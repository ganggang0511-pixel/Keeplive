name: ğŸŒ Website Keepalive Check

on:
  workflow_dispatch:        # âœ… æ‰‹åŠ¨è§¦å‘
  schedule:                 # âœ… è‡ªåŠ¨å®šæ—¶æ‰§è¡Œ
    - cron: "0 0 * * *"     # æ¯å¤© UTC 0ç‚¹è¿è¡Œä¸€æ¬¡ï¼ˆåŒ—äº¬æ—¶é—´æ—©ä¸Š8ç‚¹ï¼‰

jobs:
  run-keepalive:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install playwright requests
          playwright install chromium

      - name: Run Keepalive Script
        env:
          SITE_URL: ${{ secrets.SITE_URL }}
          USERNAME: ${{ secrets.USERNAME }}
          PASSWORD: ${{ secrets.PASSWORD }}
          USERNAME_SELECTOR: ${{ secrets.USERNAME_SELECTOR }}
          PASSWORD_SELECTOR: ${{ secrets.PASSWORD_SELECTOR }}
          LOGIN_BUTTON_SELECTOR: ${{ secrets.LOGIN_BUTTON_SELECTOR }}
          SUCCESS_TEXT: ${{ secrets.SUCCESS_TEXT }}
          FAIL_TEXTS: ${{ secrets.FAIL_TEXTS }}
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: |
          python keepalive.py
